<header class="app-header">
  <div class="logo" (click)="router.navigate(['/'])">
    <span class="logo-main">Gimnasio</span>
    <span class="logo-sub">Software</span>
  </div>

  <nav class="nav" *ngIf="isAuthenticated(); else publicLinks">

    <!-- Links para ADMIN -->
    <ng-container *ngIf="isAdmin()">
      <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
      <a routerLink="/usuarios" routerLinkActive="active">Usuarios</a>
      <a routerLink="/clases" routerLinkActive="active">Clases</a>
      <a routerLink="/rutinas" routerLinkActive="active">Rutinas</a>
      <a routerLink="/membresias" routerLinkActive="active">Membresías</a>
      <a routerLink="/pagos" routerLinkActive="active">Pagos</a>
      <a routerLink="/notificaciones" routerLinkActive="active">Notificaciones</a>
      <a routerLink="/perfil" routerLinkActive="active">Perfil</a>
    </ng-container>

    <!-- Links para ENTRENADOR -->
    <ng-container *ngIf="!isAdmin() && isTrainer()">
      <a routerLink="/dashboard" routerLinkActive="active">Inicio</a>
      <a routerLink="/clases" routerLinkActive="active">Mis clases</a>
      <a routerLink="/rutinas" routerLinkActive="active">Rutinas</a>
      <a routerLink="/notificaciones" routerLinkActive="active">Notificaciones</a>
      <a routerLink="/perfil" routerLinkActive="active">Perfil</a>
    </ng-container>

    <!-- Links para SOCIO / miembro -->
    <ng-container *ngIf="!isAdmin() && !isTrainer() && isMember()">
      <a routerLink="/dashboard" routerLinkActive="active">Inicio</a>
      <a routerLink="/clases" routerLinkActive="active">Mis clases</a>
      <a routerLink="/rutinas" routerLinkActive="active">Mis rutinas</a>
      <a routerLink="/membresias" routerLinkActive="active">Membresía</a>
      <a routerLink="/pagos" routerLinkActive="active">Pagos</a>
      <a routerLink="/notificaciones" routerLinkActive="active">Notificaciones</a>
      <a routerLink="/perfil" routerLinkActive="active">Perfil</a>
    </ng-container>

  </nav>

  <!-- Vista cuando NO está autenticado -->
  <ng-template #publicLinks>
    <nav class="nav">
      <!-- Podrías tener cosas públicas tipo "Acerca de", "Contacto" si algún día lo hacés público -->
      <a routerLink="/login" routerLinkActive="active">Iniciar sesión</a>
    </nav>
  </ng-template>

  <!-- Info de usuario + botón logout -->
  <div class="user-info" *ngIf="isAuthenticated()">
    <span class="username" *ngIf="(user$ | async) as user">
      {{ user.username }}
      <span *ngIf="user.roles?.length">({{ user.roles[0] }})</span>
    </span>
    <button class="logout-btn" (click)="logout()">Salir</button>
  </div>
</header>
