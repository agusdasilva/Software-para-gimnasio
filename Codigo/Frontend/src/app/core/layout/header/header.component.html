<header class="app-header">
  <div class="logo" (click)="router.navigate(['/'])">
    <span class="logo-main">Gimnasio <span class="logo-red">F86</span></span>
  </div>

  <nav class="nav" *ngIf="isAuthenticated(); else publicLinks">

    <!-- ADMIN -->
    <ng-container *ngIf="isAdmin()">
      <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
      <a routerLink="/usuarios" routerLinkActive="active">Usuarios</a>
      <a routerLink="/clases" routerLinkActive="active">Clases</a>
      <a routerLink="/rutinas" routerLinkActive="active">Rutinas</a>
      <a routerLink="/membresias" routerLinkActive="active">Membresias</a>
      <a routerLink="/pagos" routerLinkActive="active">Pagos</a>
      <a routerLink="/notificaciones" routerLinkActive="active">Notificaciones</a>
      <a routerLink="/perfil" routerLinkActive="active">Perfil</a>
    </ng-container>

    <!-- ENTRENADOR -->
    <ng-container *ngIf="!isAdmin() && isTrainer()">
      <a routerLink="/dashboard" routerLinkActive="active">Inicio</a>
      <a routerLink="/clases" routerLinkActive="active">Mis Clases</a>
      <a routerLink="/rutinas" routerLinkActive="active">Rutinas</a>
      <a routerLink="/notificaciones" routerLinkActive="active">Notificaciones</a>
      <a routerLink="/perfil" routerLinkActive="active">Perfil</a>
    </ng-container>

    <!-- CLIENTE / SOCIO -->
    <ng-container *ngIf="!isAdmin() && !isTrainer() && isMember()">
      <a routerLink="/dashboard" routerLinkActive="active">Inicio</a>
      <a routerLink="/clases" routerLinkActive="active">Mis Clases</a>
      <a routerLink="/rutinas" routerLinkActive="active">Mis Rutinas</a>
      <a routerLink="/membresias" routerLinkActive="active">Membresia</a>
      <a routerLink="/pagos" routerLinkActive="active">Pagos</a>
      <a routerLink="/notificaciones" routerLinkActive="active">Notificaciones</a>
      <a routerLink="/perfil" routerLinkActive="active">Perfil</a>
    </ng-container>

  </nav>

  <ng-template #publicLinks>
    <nav class="nav nav-public">
      <a routerLink="/login">Iniciar Sesion</a>
      <a routerLink="/membresias" class="vip-link">Membresia</a>
    </nav>
  </ng-template>

  <div class="user-info" *ngIf="(user$ | async) as user">
    <span class="role-badge">{{ primaryRole(user.roles) }}</span>
    <button class="profile-btn" (click)="goToProfile()" title="Mi perfil">
      <span class="avatar">{{ user.username.charAt(0) || 'P' }}</span>
    </button>
    <button class="logout-btn" (click)="logout()">Salir</button>
  </div>
</header>
